(()=>{function c(f){f.directive("form-captcha",(n,{modifiers:v},{})=>{let u=n.getAttribute("x-form-captcha-img"),s=v[0]||15,e=360/s,r=()=>Math.floor(Math.random()*e)+1,o=r();for(;o%e===0||o===1||o===e-1;)o=r();let i=[...n.closest("form").querySelectorAll("button")].filter(t=>t.attributes.type!=="button"),a=()=>{i.forEach(t=>t.setAttribute("disabled",!0))},l=()=>{i.forEach(t=>t.removeAttribute("disabled"))};a(),window.addEventListener("fv-reset-form-buttons",t=>{t.detail%e===0?l():a()}),n.innerHTML=`
      <style>
        .fvImg {
          pointer-events: none;
          transform: rotate(var(--fv-rotate));
        }
      </style>

      <div x-data="{ fvPos: ${o} }" class="fvWrapper">
        <img src="${u}" class="fvImg" :style="{ '--fv-rotate': fvPos * ${s} + 'deg' }" />

        <div class="fvActions">
          <button type="button" class="fvPrev" @click="fvPos--; $dispatch('fv-reset-form-buttons', fvPos)">Prev</button>

          <button type="button" class="fvNext" @click="fvPos++; $dispatch('fv-reset-form-buttons', fvPos)">Next</button>
        </div>
      </div>
    `})}document.addEventListener("alpine:init",()=>window.Alpine.plugin(c));})();
